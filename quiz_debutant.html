<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Certification Java - Niveau D√©butant (C1 √† C5)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom Styles for better visual consistency */
        body {
            background-color: #e5e7eb; /* Gray-100 */
        }
        .container-quiz {
            max-width: 900px;
            margin: 2rem auto;
        }
        .competence-selector {
            background-color: #1f2937; /* Gray-800 */
        }
        .competence-btn.active {
            border-bottom: 3px solid #f97316; /* Orange-500 */
            color: #f97316;
        }
        .option-button {
            transition: all 0.2s;
        }
        .option-button:hover:not(.disabled) {
            background-color: #f3f4f6; /* Gray-100 */
        }
        .option-button.correct {
            background-color: #d1fae5; /* Green-100 */
            border-color: #10b981; /* Green-500 */
            pointer-events: none;
        }
        .option-button.incorrect {
            background-color: #fee2e2; /* Red-100 */
            border-color: #ef4444; /* Red-500 */
            pointer-events: none;
        }
        .explanation {
            border-left: 4px solid #f97316; /* Orange-500 */
        }
    </style>
</head>
<body>

<div class="container-quiz p-4">
    <h1 class="text-3xl font-extrabold text-center text-gray-800 mb-4">
        Quiz D√©butant - Certification Java (C1 √† C5) üéì
    </h1>
    
    <div class="competence-selector p-3 rounded-t-lg shadow-lg flex flex-wrap justify-center space-x-2 sm:space-x-4">
        <button data-comp="0" class="competence-btn text-white px-3 py-2 text-sm font-medium border-b-3 border-transparent hover:text-orange-300 transition active">C1</button>
        <button data-comp="1" class="competence-btn text-white px-3 py-2 text-sm font-medium border-b-3 border-transparent hover:text-orange-300 transition">C2</button>
        <button data-comp="2" class="competence-btn text-white px-3 py-2 text-sm font-medium border-b-3 border-transparent hover:text-orange-300 transition">C3</button>
        <button data-comp="3" class="competence-btn text-white px-3 py-2 text-sm font-medium border-b-3 border-transparent hover:text-orange-300 transition">C4</button>
        <button data-comp="4" class="competence-btn text-white px-3 py-2 text-sm font-medium border-b-3 border-transparent hover:text-orange-300 transition">C5</button>
    </div>

    <div id="quiz-card" class="bg-white rounded-b-lg shadow-lg p-6 sm:p-8">
        </div>

    <div class="bg-white rounded-lg shadow p-4 text-sm text-gray-600 mt-6">
        <p class="font-semibold mb-2">üìã Informations sur le quiz :</p>
        <ul class="space-y-1">
            <li>‚Ä¢ Niveau de difficult√© : **D√©butant**</li>
            <li>‚Ä¢ Chaque quiz contient **5 questions** (QCM/QCU) sp√©cifiques √† la comp√©tence.</li>
            <li>‚Ä¢ Score cumul√© total : <span id="final-score" class="font-bold text-orange-600"></span></li>
        </ul>
    </div>
</div>

<script>
    const quizData = [
        // --- C1 : √âl√©ments fondamentaux et algorithmie (D√©butant) ---
        {
          competence: "C1 - √âl√©ments fondamentaux et algorithmie",
          level: "D√©butant",
          questions: [
            {
              question: "Quelle commande permet de compiler un fichier Java nomm√© 'Programme.java' en bytecode ?",
              options: [
                "java Programme.java",
                "javac Programme.java",
                "compile Programme.java",
                "jvm Programme.java"
              ],
              correct: 1,
              explanation: "La commande 'javac' est le compilateur Java qui transforme le code source (.java) en bytecode (.class)."
            },
            {
              question: "Quelle est la signature correcte de la m√©thode principale (main) dans une classe Java ?",
              options: [
                "void main(String[] args)",
                "public void main(String args[])",
                "public static void main(String[] args)",
                "static main()"
              ],
              correct: 2,
              explanation: "La m√©thode main doit √™tre 'public' (accessible), 'static' (appelable sans objet) et 'void' (ne retourne rien)."
            },
            {
              question: "Quel type de donn√©es est le plus appropri√© pour stocker un nombre entier tr√®s grand, comme le nombre d'habitants sur Terre ?",
              options: [
                "int",
                "short",
                "byte",
                "long"
              ],
              correct: 3,
              explanation: "Le type 'long' est un entier de 64 bits, capable de stocker des valeurs bien plus grandes que 'int' (32 bits)."
            },
            {
              question: "Que repr√©sente le 'bytecode' dans le processus de compilation Java ?",
              options: [
                "Le code source du programme avant compilation.",
                "Le code binaire ex√©cutable par le syst√®me d'exploitation.",
                "Un format interm√©diaire ex√©cutable par la Machine Virtuelle Java (JVM).",
                "Les m√©tadonn√©es de la classe."
              ],
              correct: 2,
              explanation: "Le bytecode est un ensemble d'instructions compr√©hensibles par la JVM, permettant la portabilit√© (principe 'Write Once, Run Anywhere')."
            },
            {
              question: "Quelle est la convention de nommage recommand√©e pour une constante (valeur qui ne change jamais) en Java ?",
              options: [
                "CONSTANTE_MAJUSCULE",
                "constanteMajuscule",
                "CONSTANTE_MINUSCULE",
                "ConstanteMajuscule"
              ],
              correct: 0,
              explanation: "Les constantes sont nomm√©es en majuscules avec des underscores (_) pour s√©parer les mots (SNAKE_CASE MAJUSCULE)."
            }
          ]
        },
        
        // --- C2 : Programmation Orient√©e Objet (D√©butant) ---
        {
          competence: "C2 - Programmation Orient√©e Objet",
          level: "D√©butant",
          questions: [
            {
              question: "Quel terme d√©crit le mieux une 'classe' en Java ?",
              options: [
                "Une instance concr√®te d'un objet.",
                "Un plan ou un mod√®le pour cr√©er des objets.",
                "Une simple fonction ou m√©thode.",
                "Un ensemble de donn√©es non structur√©es."
              ],
              correct: 1,
              explanation: "La classe est un mod√®le (ou un blueprint) qui d√©finit la structure (attributs) et le comportement (m√©thodes) des objets."
            },
            {
              question: "Comment appelle-t-on le processus de cr√©ation d'une instance concr√®te d'une classe ?",
              options: [
                "D√©claration",
                "H√©ritage",
                "Instanciation",
                "Compilation"
              ],
              correct: 2,
              explanation: "L'instanciation est le processus d'utilisation de l'op√©rateur 'new' pour cr√©er un objet √† partir du mod√®le de la classe."
            },
            {
              question: "Quel est le r√¥le principal d'un constructeur ?",
              options: [
                "D√©truire l'objet lorsqu'il n'est plus utilis√©.",
                "Lancer le programme principal (main).",
                "Initialiser l'√©tat (les attributs) d'un nouvel objet.",
                "Rendre une m√©thode accessible depuis l'ext√©rieur de la classe."
              ],
              correct: 2,
              explanation: "Le constructeur est ex√©cut√© au moment de l'instanciation (avec 'new') pour initialiser les variables membres de l'objet."
            },
            {
              question: "Quel mot-cl√© Java est utilis√© pour sp√©cifier qu'un attribut ou une m√©thode est accessible depuis n'importe quelle autre classe ?",
              options: [
                "private",
                "protected",
                "default",
                "public"
              ],
              correct: 3,
              explanation: "Le modificateur 'public' assure la plus large accessibilit√©, permettant l'acc√®s depuis n'importe quel paquetage ou classe."
            },
            {
              question: "Lequel des √©l√©ments suivants est consid√©r√© comme un '√©tat' d'un objet (donn√©es) ?",
              options: [
                "Une m√©thode",
                "Un constructeur",
                "Un attribut (variable membre)",
                "L'h√©ritage"
              ],
              correct: 2,
              explanation: "L'√©tat d'un objet est d√©fini par les valeurs de ses attributs (variables membres)."
            }
          ]
        },
        
        // --- C3 : Structures de Contr√¥le, Tableaux et Collections (D√©butant) ---
        {
          competence: "C3 - Structures de Contr√¥le, Tableaux et Collections",
          level: "D√©butant",
          questions: [
            {
              question: "Quelle structure de contr√¥le est utilis√©e pour ex√©cuter un bloc de code si une condition est VRAIE et un autre bloc si elle est FAUSSE ?",
              options: [
                "switch",
                "for",
                "while",
                "if / else"
              ],
              correct: 3,
              explanation: "La structure 'if/else' est la structure de choix binaire classique (condition vraie ou fausse)."
            },
            {
              question: "Quelle est la principale diff√©rence d'usage entre une boucle 'for' et une boucle 'while' ?",
              options: [
                "Le 'for' est pour les collections, le 'while' pour les tableaux.",
                "Le 'for' est utilis√© quand le nombre d'it√©rations est connu d'avance (d√©terministe).",
                "Le 'while' est plus rapide que le 'for'.",
                "Le 'while' est r√©serv√© aux conditions infinies."
              ],
              correct: 1,
              explanation: "La boucle 'for' est d√©terministe (compteur connu), tandis que 'while' est souvent utilis√©e lorsque l'arr√™t d√©pend d'une condition qui peut changer √† tout moment (non d√©terministe)."
            },
            {
              question: "Comment d√©clare-t-on correctement un tableau d'entiers (int) nomm√© 'scores' de taille 10 en Java ?",
              options: [
                "int scores = new int[10];",
                "Array<int> scores = 10;",
                "int[] scores = new int[10];",
                "scores[10];"
              ],
              correct: 2,
              explanation: "La syntaxe correcte est 'Type[] nomTableau = new Type[taille];'."
            },
            {
              question: "Pour un tableau nomm√© 'data' de taille 5, quel est l'index valide maximum que vous pouvez utiliser pour acc√©der √† un √©l√©ment ?",
              options: [
                "5",
                "6",
                "4",
                "1"
              ],
              correct: 2,
              explanation: "Les index de tableau commencent √† 0. Pour une taille N, les index vont de 0 √† N-1. Pour une taille 5, l'index maximum est 4."
            },
            {
              question: "Quelle est la principale caract√©ristique de la classe `ArrayList` par rapport √† un tableau standard (array) ?",
              options: [
                "Elle stocke uniquement des nombres.",
                "Elle est plus rapide en acc√®s par index.",
                "Sa taille est fixe et d√©finie √† l'initialisation.",
                "Sa taille est dynamique et peut grandir ou r√©tr√©cir."
              ],
              correct: 3,
              explanation: "Contrairement aux tableaux, l'ArrayList fait partie des Collections dont la taille peut √™tre ajust√©e dynamiquement apr√®s la cr√©ation."
            }
          ]
        },
        
        // --- C4 : Gestion des Exceptions et Entr√©es/Sorties (D√©butant) ---
        {
          competence: "C4 - Gestion des Exceptions et Entr√©es/Sorties (I/O)",
          level: "D√©butant",
          questions: [
            {
              question: "Quel bloc de code est utilis√© pour inclure le code susceptible de g√©n√©rer une exception ?",
              options: [
                "throw",
                "finally",
                "catch",
                "try"
              ],
              correct: 3,
              explanation: "Le code risqu√© doit √™tre plac√© dans le bloc 'try' pour tenter son ex√©cution."
            },
            {
              question: "L'exception `ArithmeticException` (ex: division par z√©ro) est une exception...",
              options: [
                "V√©rifi√©e (Checked)",
                "Non v√©rifi√©e (Unchecked) / Erreur d'ex√©cution",
                "Non g√©rable",
                "d'I/O (Input/Output)"
              ],
              correct: 1,
              explanation: "Les exceptions d'ex√©cution (Runtime Exceptions) comme ArithmeticException sont non v√©rifi√©es, elles ne n√©cessitent pas de 'throws' dans la signature de la m√©thode."
            },
            {
              question: "Quel code permet de s'assurer qu'une ressource (comme un fichier) est ferm√©e, qu'une exception ait √©t√© lev√©e ou non ?",
              options: [
                "Le bloc 'catch'",
                "Le bloc 'finally'",
                "L'instruction 'throw'",
                "L'instruction 'break'"
              ],
              correct: 1,
              explanation: "Le bloc 'finally' s'ex√©cute toujours, que le code dans 'try' se termine normalement ou qu'une exception soit captur√©e ou non."
            },
            {
              question: "Quelle est l'exception la plus fr√©quente lorsqu'on tente d'acc√©der √† un fichier qui n'existe pas en lecture ?",
              options: [
                "NullPointerException",
                "FileNotFoundException (ou IOException)",
                "NumberFormatException",
                "InterruptedException"
              ],
              correct: 1,
              explanation: "La 'FileNotFoundException' est une exception v√©rifi√©e (Checked) courante dans les op√©rations de lecture de fichiers."
            },
            {
              question: "Lequel de ces √©l√©ments n'est **pas** une composante de la gestion des exceptions ?",
              options: [
                "try",
                "catch",
                "throw",
                "switch"
              ],
              correct: 3,
              explanation: "'switch' est une structure de contr√¥le de flux (choix multiple), pas un √©l√©ment de l'architecture de gestion des exceptions."
            }
          ]
        },
        
        // --- C5 : Connexion √† une base de donn√©es avec JDBC (D√©butant) ---
        {
          competence: "C5 - Connexion √† une base de donn√©es avec JDBC",
          level: "D√©butant",
          questions: [
            {
              question: "Quelle classe JDBC est principalement utilis√©e pour √©tablir la connexion √† une base de donn√©es ?",
              options: [
                "Statement",
                "ResultSet",
                "DriverManager",
                "ConnectionFactory"
              ],
              correct: 2,
              explanation: "Le 'DriverManager' est la classe statique utilis√©e pour obtenir un objet 'Connection' √† partir d'une URL, d'un utilisateur et d'un mot de passe."
            },
            {
              question: "Quel objet est utilis√© pour envoyer une requ√™te SQL simple (non param√©tr√©e) √† la base de donn√©es ?",
              options: [
                "PreparedStatement",
                "Connection",
                "Statement",
                "ResultSet"
              ],
              correct: 2,
              explanation: "L'objet 'Statement' est la forme de base pour ex√©cuter des requ√™tes SQL statiques."
            },
            {
              question: "Quelle m√©thode doit-on utiliser sur un objet Statement ou PreparedStatement pour ex√©cuter une requ√™te `INSERT` ou `UPDATE` ?",
              options: [
                "executeQuery()",
                "execute()",
                "executeUpdate()",
                "executeInsert()"
              ],
              correct: 2,
              explanation: "'executeUpdate()' est utilis√© pour les requ√™tes DML (Data Manipulation Language) qui modifient les donn√©es et retourne le nombre de lignes affect√©es."
            },
            {
              question: "Quelle m√©thode de l'objet `ResultSet` permet d'avancer au prochain enregistrement ?",
              options: [
                "next()",
                "forward()",
                "move()",
                "read()"
              ],
              correct: 0,
              explanation: "La m√©thode 'next()' fait avancer le curseur √† l'enregistrement suivant et retourne 'true' s'il existe un enregistrement, 'false' sinon."
            },
            {
              question: "L'exception de base lev√©e par l'API JDBC en cas d'erreur de base de donn√©es est :",
              options: [
                "IOException",
                "DatabaseException",
                "SQLException",
                "SystemException"
              ],
              correct: 2,
              explanation: "Toutes les erreurs et avertissements li√©s √† la base de donn√©es dans JDBC sont encapsul√©s dans la 'SQLException'."
            }
          ]
        }
    ];

    let currentCompetenceIndex = 0;
    let currentQuestionIndex = 0;
    let selectedAnswer = null;
    let showResult = false;
    // Stockage du score et des r√©ponses par comp√©tence: [score, reponse_index_selectionn√©_par_question]
    let quizState = quizData.map(comp => ({
        score: 0,
        answered: Array(comp.questions.length).fill(null), // null: non r√©pondu, -1: r√©ponse incorrecte, index: r√©ponse correcte
        isCompleted: false
    }));

    const quizCard = document.getElementById('quiz-card');
    const competenceButtons = document.querySelectorAll('.competence-btn');
    const finalScoreDisplay = document.getElementById('final-score');

    const TOTAL_QUESTIONS = quizData.reduce((sum, comp) => sum + comp.questions.length, 0);

    // --- Core Logic ---

    function updateFinalScoreDisplay() {
        const totalScore = quizState.reduce((sum, state) => sum + state.score, 0);
        finalScoreDisplay.textContent = `${totalScore}/${TOTAL_QUESTIONS} (${Math.round((totalScore / TOTAL_QUESTIONS) * 100)}%)`;
    }

    function checkAnswer(selectedIndex) {
        if (showResult) return; // Emp√™che de r√©pondre deux fois

        const currentCompState = quizState[currentCompetenceIndex];
        const currentQuestion = quizData[currentCompetenceIndex].questions[currentQuestionIndex];
        
        selectedAnswer = selectedIndex;
        showResult = true;

        // Mise √† jour de l'√©tat (score et r√©ponse)
        if (selectedIndex === currentQuestion.correct) {
            currentCompState.score++;
            currentCompState.answered[currentQuestionIndex] = selectedIndex; // Stocke l'index de la r√©ponse correcte
        } else {
             currentCompState.answered[currentQuestionIndex] = -1; // -1 pour incorrect
        }
        
        if (currentQuestionIndex === quizData[currentCompetenceIndex].questions.length - 1) {
            currentCompState.isCompleted = true;
        }

        renderQuiz();
        updateFinalScoreDisplay();
    }

    function nextQuestion() {
        showResult = false;
        selectedAnswer = null;
        
        const questionsInComp = quizData[currentCompetenceIndex].questions.length;

        if (currentQuestionIndex < questionsInComp - 1) {
            // Passer √† la question suivante dans la m√™me comp√©tence
            currentQuestionIndex++;
        } else {
            // Passer √† la comp√©tence suivante si la question actuelle est la derni√®re
            if (currentCompetenceIndex < quizData.length - 1) {
                currentCompetenceIndex++;
                currentQuestionIndex = 0;
                // Met √† jour l'√©tat des boutons de comp√©tence
                competenceButtons.forEach(btn => btn.classList.remove('active'));
                competenceButtons[currentCompetenceIndex].classList.add('active');
            } else {
                // Quiz enti√®rement termin√©
                return;
            }
        }
        renderQuiz();
    }
    
    function previousQuestion() {
        showResult = false;
        selectedAnswer = null;
        
        if (currentQuestionIndex > 0) {
            // Revenir √† la question pr√©c√©dente dans la m√™me comp√©tence
            currentQuestionIndex--;
        } else {
            // Revenir √† la comp√©tence pr√©c√©dente
            if (currentCompetenceIndex > 0) {
                currentCompetenceIndex--;
                currentQuestionIndex = quizData[currentCompetenceIndex].questions.length - 1;
                // Met √† jour l'√©tat des boutons de comp√©tence
                competenceButtons.forEach(btn => btn.classList.remove('active'));
                competenceButtons[currentCompetenceIndex].classList.add('active');
            } else {
                // Premi√®re question de la premi√®re comp√©tence
                return;
            }
        }
        
        // Si on revient √† une question d√©j√† r√©pondue, afficher la r√©ponse enregistr√©e
        const answeredState = quizState[currentCompetenceIndex].answered[currentQuestionIndex];
        if (answeredState !== null) {
            showResult = true;
            // Si la r√©ponse √©tait correcte, selectedAnswer doit √™tre l'index correct pour le rendu
            selectedAnswer = answeredState !== -1 ? answeredState : quizData[currentCompetenceIndex].questions[currentQuestionIndex].correct; 
        }

        renderQuiz();
    }

    function resetQuiz() {
        quizState = quizData.map(comp => ({
            score: 0,
            answered: Array(comp.questions.length).fill(null),
            isCompleted: false
        }));
        currentCompetenceIndex = 0;
        currentQuestionIndex = 0;
        selectedAnswer = null;
        showResult = false;
        competenceButtons.forEach(btn => btn.classList.remove('active'));
        competenceButtons[0].classList.add('active');
        renderQuiz();
        updateFinalScoreDisplay();
    }


    // --- Rendering Logic (HTML Generation) ---

    function renderQuiz() {
        const currentComp = quizData[currentCompetenceIndex];
        const currentQuestion = currentComp.questions[currentQuestionIndex];
        const questionsInComp = currentComp.questions.length;
        const compScore = quizState[currentCompetenceIndex].score;
        
        // V√©rifie si la question a √©t√© r√©pondue pour restaurer l'√©tat
        const answeredIndex = quizState[currentCompetenceIndex].answered[currentQuestionIndex];
        const isAnswered = answeredIndex !== null;
        
        if (isAnswered && !showResult) {
             showResult = true;
             // Si la r√©ponse √©tait incorrecte (-1), on affiche la bonne r√©ponse pour le rendu
             selectedAnswer = answeredIndex !== -1 ? answeredIndex : currentQuestion.correct;
        }

        let htmlContent = `
            <div class="mb-6">
                <h2 class="text-xl sm:text-2xl font-semibold text-orange-600 border-b pb-2 mb-4">
                    ${currentComp.competence} (Niveau ${currentComp.level})
                </h2>
                <div class="text-sm text-gray-500 mb-3 flex justify-between">
                    <p>Question ${currentQuestionIndex + 1}/${questionsInComp}</p>
                    <p>Score actuel pour C${currentCompetenceIndex + 1} : <span class="font-bold text-gray-800">${compScore}/5</span></p>
                </div>
                <p class="text-lg font-medium text-gray-900">${currentQuestion.question}</p>
            </div>

            <div class="space-y-3">
                ${currentQuestion.options.map((option, index) => {
                    let buttonClass = 'option-button p-3 border rounded-lg text-left w-full disabled:opacity-100';
                    let icon = '';

                    if (showResult) {
                        if (index === currentQuestion.correct) {
                            // Bonne r√©ponse
                            buttonClass += ' correct border-green-500 font-bold';
                            icon = '<span class="ml-auto text-green-600"><svg class="lucide-check-circle" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg></span>';
                        } else if (index === selectedAnswer && selectedAnswer !== currentQuestion.correct) {
                            // Mauvaise r√©ponse s√©lectionn√©e
                            buttonClass += ' incorrect border-red-500';
                            icon = '<span class="ml-auto text-red-600"><svg class="lucide-x-circle" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path></svg></span>';
                        } else {
                            // Autres options non s√©lectionn√©es
                            buttonClass += ' bg-white text-gray-700';
                        }
                    } else {
                        // Pas encore r√©pondu
                        buttonClass += ' bg-white text-gray-700 hover:bg-gray-100';
                    }

                    return `
                        <button 
                            class="${buttonClass}" 
                            onclick="checkAnswer(${index})"
                            ${showResult ? 'disabled' : ''}
                        >
                            <span class="flex items-center justify-between">
                                <span>${option}</span>
                                ${icon}
                            </span>
                        </button>
                    `;
                }).join('')}
            </div>

            ${showResult ? `
                <div class="mt-6 p-4 explanation bg-orange-50 rounded-lg text-gray-700">
                    <p class="font-semibold text-orange-700 mb-1">Explication :</p>
                    <p>${currentQuestion.explanation}</p>
                </div>
            ` : ''}
            
            <div class="mt-8 flex justify-between items-center">
                <button
                    onclick="previousQuestion()"
                    class="flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors ${currentCompetenceIndex === 0 && currentQuestionIndex === 0 ? 'opacity-50 cursor-not-allowed' : ''}"
                    ${currentCompetenceIndex === 0 && currentQuestionIndex === 0 ? 'disabled' : ''}
                >
                    <svg class="lucide-chevron-left" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"></path></svg>
                    Pr√©c√©dent
                </button>
                
                ${!showResult ? `
                    <p class="text-sm text-gray-500">S√©lectionnez une option</p>
                ` : `
                    <button
                        onclick="nextQuestion()"
                        class="flex items-center gap-2 px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors"
                    >
                        Suivant
                        <svg class="lucide-chevron-right" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg>
                    </button>
                `}
            </div>
            
            ${currentCompetenceIndex === quizData.length - 1 && currentQuestionIndex === questionsInComp - 1 && showResult ? `
                 <div class="mt-8 pt-4 border-t border-gray-200 text-center">
                    <p class="text-xl font-bold text-orange-900 mb-2">
                        Fin du Quiz D√©butant !
                    </p>
                    <button
                        onclick="resetQuiz()"
                        class="flex items-center mx-auto gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"
                    >
                        <svg class="lucide-rotate-ccw" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6H9M10 20l-4-4 4-4"></path><path d="M4 16h13a4 4 0 0 0 0-8h-2"></path></svg>
                        Recommencer tous les quiz
                    </button>
                </div>
            ` : ''}
        `;

        quizCard.innerHTML = htmlContent;
    }

    function changeCompetence(index) {
        currentCompetenceIndex = index;
        currentQuestionIndex = 0;
        selectedAnswer = null;
        showResult = false;
        
        // G√®re l'√©tat des boutons
        competenceButtons.forEach((btn, i) => {
            btn.classList.toggle('active', i === index);
        });

        // Tente de charger la premi√®re question de la comp√©tence
        const answeredIndex = quizState[currentCompetenceIndex].answered[currentQuestionIndex];
        if (answeredIndex !== null) {
            showResult = true;
            selectedAnswer = answeredIndex !== -1 ? answeredIndex : quizData[currentCompetenceIndex].questions[currentQuestionIndex].correct; 
        }

        renderQuiz();
    }
    
    // --- Initialization ---
    competenceButtons.forEach((btn, index) => {
        btn.addEventListener('click', () => changeCompetence(index));
    });

    // Rendu initial
    renderQuiz();
    updateFinalScoreDisplay();
</script>
</body>
</html>
